<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Minecraft MP3 Playlist</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding: 2em;
      background: #f4f4f4;
    }
    h1 {
      margin-bottom: 0.5em;
    }
    button {
      margin: 0.5em;
      padding: 0.5em 1em;
      font-size: 1em;
    }
    #status {
      margin-top: 1em;
      font-weight: bold;
    }
    #seekBarContainer {
      margin-top: 1.5em;
      width: 80%;
      margin-left: auto;
      margin-right: auto;
    }
    #seekBar {
      width: 100%;
    }
    #playlistContainer {
      margin-top: 2em;
      text-align: left;
      display: inline-block;
      max-height: 200px;
      overflow-y: auto;
      width: 80%;
    }
    #playlistContainer li {
      cursor: pointer;
      padding: 0.3em;
      background-color: #eee;
      margin-bottom: 0.2em;
      border-radius: 5px;
    }
    #playlistContainer li:hover {
      background-color: #ddd;
    }
    #playlistContainer li.removed {
      background-color: #f88;
    }
  </style>
</head>
<body>
  <h1>Minecraft Music Player üéµ</h1>

  <div>
    <button id="prevBtn">‚èÆÔ∏è Previous</button>
    <button id="playPauseBtn">‚è∏Ô∏è Pause</button>
    <button id="nextBtn">‚è≠Ô∏è Next</button>
    <button id="shuffleBtn">üîÄ Shuffle: Off</button>
  </div>

  <div id="seekBarContainer">
    <input type="range" id="seekBar" value="0" min="0" max="100" step="1">
  </div>

  <div>
    <input type="file" id="fileInput" multiple accept="audio/mp3">
    <button id="addToPlaylistBtn">Add to Playlist</button>
  </div>

  <p id="status">Please select your MP3 files...</p>

  <h3>Playlist</h3>
  <ul id="playlistContainer"></ul>

  <script>
    const audio = new Audio();
    const statusText = document.getElementById("status");
    const playPauseBtn = document.getElementById("playPauseBtn");
    const nextBtn = document.getElementById("nextBtn");
    const prevBtn = document.getElementById("prevBtn");
    const shuffleBtn = document.getElementById("shuffleBtn");
    const seekBar = document.getElementById("seekBar");
    const fileInput = document.getElementById("fileInput");
    const addToPlaylistBtn = document.getElementById("addToPlaylistBtn");
    const playlistContainer = document.getElementById("playlistContainer");

    let playlist = [];
    let currentTrack = 0;
    let isPlaying = false;
    let shuffle = false;

    // Allow users to select MP3 files
    fileInput.addEventListener("change", (event) => {
      const files = event.target.files;
      for (let i = 0; i < files.length; i++) {
        if (files[i].type === "audio/mp3") {
          const fileURL = URL.createObjectURL(files[i]);
          playlist.push({ name: files[i].name, url: fileURL });
        }
      }
      updatePlaylistDisplay();
      statusText.textContent = "MP3 files added to the playlist.";
    });

    // Add selected MP3 files to playlist
    addToPlaylistBtn.addEventListener("click", () => {
      if (playlist.length === 0) {
        alert("Please select MP3 files first.");
      }
    });

    // Display playlist
    function updatePlaylistDisplay() {
      playlistContainer.innerHTML = ''; // Clear previous list
      playlist.forEach((track, index) => {
        const listItem = document.createElement("li");
        listItem.textContent = track.name;
        listItem.addEventListener("click", () => playTrack(index));
        const removeBtn = document.createElement("span");
        removeBtn.textContent = "‚ùå";
        removeBtn.style.marginLeft = "10px";
        removeBtn.style.cursor = "pointer";
        removeBtn.addEventListener("click", (e) => removeTrack(index, e));
        listItem.appendChild(removeBtn);
        playlistContainer.appendChild(listItem);
      });
    }

    // Play selected track
    function playTrack(index) {
      currentTrack = index;
      audio.src = playlist[currentTrack].url;
      audio.play();
      isPlaying = true;
      playPauseBtn.textContent = "‚è∏Ô∏è Pause";
      statusText.textContent = "Playing: " + playlist[currentTrack].name;
    }

    // Remove track from playlist
    function removeTrack(index, event) {
      event.stopPropagation();  // Prevent triggering the playTrack on click
      playlist.splice(index, 1);
      updatePlaylistDisplay();
      if (currentTrack >= playlist.length) currentTrack = playlist.length - 1;
      if (currentTrack < 0 && playlist.length > 0) {
        playTrack(0);
      }
    }

    // Play next track
    function playNextTrack() {
      currentTrack++;
      if (currentTrack >= playlist.length) currentTrack = 0;
      playTrack(currentTrack);
    }

    // Play previous track
    function playPrevTrack() {
      currentTrack--;
      if (currentTrack < 0) currentTrack = playlist.length - 1;
      playTrack(currentTrack);
    }

    // Toggle play/pause
    function togglePlayPause() {
      if (isPlaying) {
        audio.pause();
        playPauseBtn.textContent = "‚ñ∂Ô∏è Play";
        statusText.textContent = "Paused: " + playlist[currentTrack].name;
      } else {
        audio.play();
        playPauseBtn.textContent = "‚è∏Ô∏è Pause";
        statusText.textContent = "Playing: " + playlist[currentTrack].name;
      }
      isPlaying = !isPlaying;
    }

    // Toggle shuffle
    function toggleShuffle() {
      shuffle = !shuffle;
      shuffleBtn.textContent = shuffle ? "üîÄ Shuffle: On" : "üîÄ Shuffle: Off";
      if (shuffle) {
        playlist = shuffleArray(playlist);
      }
      playTrack(currentTrack);
    }

    // Shuffle playlist
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]]; // Swap elements
      }
      return array;
    }

    // Update seek bar as song plays
    audio.addEventListener("timeupdate", () => {
      if (!isNaN(audio.duration)) {
        seekBar.max = Math.floor(audio.duration);
        seekBar.value = Math.floor(audio.currentTime);
      }
    });

    // Seek when user adjusts bar
    seekBar.addEventListener("input", () => {
      audio.currentTime = seekBar.value;
    });

    audio.addEventListener("ended", playNextTrack);
    playPauseBtn.addEventListener("click", togglePlayPause);
    nextBtn.addEventListener("click", playNextTrack);
    prevBtn.addEventListener("click", playPrevTrack);
    shuffleBtn.addEventListener("click", toggleShuffle);

  </script>
</body>
</html>
